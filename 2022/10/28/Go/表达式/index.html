<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>表达式 - Kurisu&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Kurisu&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Kurisu&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="保留字 语言设计简练，保留字不多。"><meta property="og:type" content="blog"><meta property="og:title" content="表达式"><meta property="og:url" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><meta property="og:site_name" content="Kurisu&#039;s Blog"><meta property="og:description" content="保留字 语言设计简练，保留字不多。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193748231.png"><meta property="og:image" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193847473.png"><meta property="og:image" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028194121301.png"><meta property="og:image" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028211528301.png"><meta property="og:image" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221029002431053.png"><meta property="article:published_time" content="2022-10-28T11:36:18.000Z"><meta property="article:modified_time" content="2022-11-04T02:16:40.382Z"><meta property="article:author" content="Kurisu"><meta property="article:tag" content="Go"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193748231.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},"headline":"表达式","image":["https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193748231.png","https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193847473.png","https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028194121301.png","https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028211528301.png","https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221029002431053.png"],"datePublished":"2022-10-28T11:36:18.000Z","dateModified":"2022-11-04T02:16:40.382Z","author":{"@type":"Person","name":"Kurisu"},"publisher":{"@type":"Organization","name":"Kurisu's Blog","logo":{"@type":"ImageObject","url":"https://mrcq.github.io/img/logo.svg"}},"description":"保留字 语言设计简练，保留字不多。"}</script><link rel="canonical" href="https://mrcq.github.io/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Serif Simplified Chinese:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?ed68212360e83c07d191372605274f6e";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="D5E963705D472839D42E0AC1C65D96AB"><script src="https://www.googletagmanager.com/gtag/js?id=G-X1YWL675NS" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-X1YWL675NS');</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Kurisu&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">时间轴</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>表达式</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2022-10-28T11:36:18.000Z" title="2022-10-28T11:36:18.000Z">2022-10-28</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2022-11-04T02:16:40.382Z" title="2022-11-04T02:16:40.382Z">2022-11-04</time></span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><span> / </span><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a><span> / </span><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/">Go</a></span><span class="level-item">8 分钟读完 (大约1197个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><div class="content"><h2 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h2><ul>
<li><p>语言设计简练，保留字不多。</p>
<p><img src="/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193748231.png"><span id="more"></span></p>
</li>
</ul>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><ul>
<li><p>全部运算符、分隔符，以及其他符号。</p>
<p><img src="/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028193847473.png"></p>
</li>
<li><p>运算符结合律全部从左到右。</p>
<p><img src="/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028194121301.png"></p>
</li>
<li><p>简单位运算演示。</p>
<p><img src="/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221028211528301.png"></p>
<blockquote>
<p>如果运算符<strong>右侧</strong>数值的第 i 位为 <code>1</code>，那么计算结果中的第 i 位为 <code>0</code>；如果运算符<strong>右侧</strong>数值的第 i 位为 <code>0</code>，那么计算结果中的第 i 位为运算符<strong>左侧</strong>数值的第 i 位的值。</p>
</blockquote>
</li>
<li><p>标志位操作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">0</span></span><br><span class="line">a |= <span class="number">1</span> &lt;&lt; <span class="number">2</span> <span class="comment">// 0000100: 在 bit2 设置标志位。</span></span><br><span class="line">a |= <span class="number">1</span> &lt;&lt; <span class="number">6</span> <span class="comment">// 1000100: 在 bit6 设置标志位</span></span><br><span class="line">a = a &amp;^ (<span class="number">1</span> &lt;&lt; <span class="number">6</span>) <span class="comment">// 0000100: 清除 bit6 标志位。</span></span><br></pre></td></tr></table></figure></li>
<li><p>不支持运算符重载。尤其需要注意，”++”、”–” 是语句而非表达式。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">n := <span class="number">0</span></span><br><span class="line">p := &amp;n</span><br><span class="line"></span><br><span class="line"><span class="comment">// b := n++ // syntax error</span></span><br><span class="line"><span class="comment">// if n++ == 1 &#123;&#125; // syntax error</span></span><br><span class="line"><span class="comment">// ++n // syntax error</span></span><br><span class="line"></span><br><span class="line">n++</span><br><span class="line">*p++ <span class="comment">// (*p)++</span></span><br></pre></td></tr></table></figure></li>
<li><p>没有 “~”，取反运算也用 “^”。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x := <span class="number">1</span></span><br><span class="line">x, ^x <span class="comment">// 0001, -0010</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><ul>
<li><p>初始化复合对象，必须使用类型标签，且左大括号必须在类型尾部。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var a struct &#123; x int &#125; = &#123; 100 &#125; // syntax error</span></span><br><span class="line"><span class="comment">// var b []int = &#123; 1, 2, 3 &#125; // syntax error</span></span><br><span class="line"><span class="comment">// c := struct &#123;x int; y string&#125; // syntax error: unexpected semicolon or newline</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">struct</span>&#123; x <span class="type">int</span> &#125;&#123;<span class="number">100</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>初始化值以 “,” 分隔。可以分多行，但最后一行必须以 “,” 或 “}” 结尾。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="type">int</span>&#123;</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">	<span class="number">2</span> <span class="comment">// Error: need trailing comma before newline in composite literal</span></span><br><span class="line">&#125;</span><br><span class="line">a := []<span class="type">int</span>&#123;</span><br><span class="line">	<span class="number">1</span>,</span><br><span class="line">	<span class="number">2</span>, <span class="comment">// ok</span></span><br><span class="line">&#125;</span><br><span class="line">b := []<span class="type">int</span>&#123;</span><br><span class="line">	<span class="number">1</span>,</span><br><span class="line">	<span class="number">2</span> &#125; <span class="comment">// ok</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><h3 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h3><ul>
<li><p>可省略条件表达式括号。</p>
</li>
<li><p>支持初始化语句，可定义代码块局部变量。</p>
</li>
<li><p>代码块左大括号必须在条件表达式尾部。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x := <span class="number">0</span></span><br><span class="line"><span class="comment">// if x &gt; 10 // Error: missing condition in if statement</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">if</span> n := <span class="string">&quot;abc&quot;</span>; x &gt; <span class="number">0</span> &#123; <span class="comment">// 初始化语句未必就是定义变量，比如 println(&quot;init&quot;) 也是可以的。</span></span><br><span class="line">	<span class="built_in">println</span>(n[<span class="number">2</span>])</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> x &lt; <span class="number">0</span> &#123; <span class="comment">// 注意 else if 和 else 左大括号位置。</span></span><br><span class="line">	<span class="built_in">println</span>(n[<span class="number">1</span>])</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(n[<span class="number">0</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不支持三元操作符 “a &gt; b ? a : b”。</p>
</li>
</ul>
<h3 id="For"><a href="#For" class="headerlink" title="For"></a>For</h3><ul>
<li><p>支持三种循环方式，包括类 while 语法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">for</span> i, n := <span class="number">0</span>, <span class="built_in">len</span>(s); i &lt; n; i++ &#123; <span class="comment">// 常见的 for 循环，支持初始化语句。</span></span><br><span class="line">	<span class="built_in">println</span>(s[i])</span><br><span class="line">&#125;</span><br><span class="line">n := <span class="built_in">len</span>(s)</span><br><span class="line"><span class="keyword">for</span> n &gt; <span class="number">0</span> &#123; <span class="comment">// 替代 while (n &gt; 0) &#123;&#125;</span></span><br><span class="line">	<span class="built_in">println</span>(s[n<span class="number">-1</span>]) <span class="comment">// 替代 for (; n &gt; 0;) &#123;&#125;</span></span><br><span class="line">	n--</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> &#123; <span class="comment">// 替代 while (true) &#123;&#125;</span></span><br><span class="line">	<span class="built_in">println</span>(s) <span class="comment">// 替代 for (;;) &#123;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不要期望编译器能理解你的想法，在初始化语句中计算出全部结果是个好主意。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">length</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;call length.&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">&quot;abcd&quot;</span></span><br><span class="line">	<span class="keyword">for</span> i, n := <span class="number">0</span>, length(s); i &lt; n; i++ &#123; <span class="comment">// 避免多次调⽤用 length 函数。</span></span><br><span class="line">		<span class="built_in">println</span>(i, s[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>call length.<br>0 97<br>1 98<br>2 99<br>3 100</p>
</blockquote>
</li>
</ul>
<h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><ul>
<li><p>类似迭代器操作，返回 (索引, 值) 或 (键, 值)。</p>
<p><img src="/2022/10/28/Go/%E8%A1%A8%E8%BE%BE%E5%BC%8F/image-20221029002431053.png"></p>
</li>
<li><p>可忽略不想要的返回值，或用 “_” 这个特殊变量。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> s &#123; <span class="comment">// 忽略 2nd value，支持 string/array/slice/map。</span></span><br><span class="line"><span class="built_in">println</span>(s[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, c := <span class="keyword">range</span> s &#123; <span class="comment">// 忽略 index。</span></span><br><span class="line"><span class="built_in">println</span>(c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">range</span> s &#123; <span class="comment">// 忽略全部返回值，仅迭代。</span></span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123; <span class="comment">// 返回 (key, value)。</span></span><br><span class="line"><span class="built_in">println</span>(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>注意，range 会复制对象。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> a &#123; <span class="comment">// index、value 都是从复制品中取出。</span></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">0</span> &#123; <span class="comment">// 在修改前，我们先修改原数组。</span></span><br><span class="line">		a[<span class="number">1</span>], a[<span class="number">2</span>] = <span class="number">999</span>, <span class="number">999</span></span><br><span class="line">		fmt.Println(a) <span class="comment">// 确认修改有效，输出 [0, 999, 999]。</span></span><br><span class="line">	&#125;</span><br><span class="line">	a[i] = v + <span class="number">100</span> <span class="comment">// 使用复制品中取出的 value 修改原数组。</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(a) <span class="comment">// 输出 [100, 101, 102]。</span></span><br></pre></td></tr></table></figure></li>
<li><p>建议改用引用类型，其底层数据不会被复制。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> s &#123; <span class="comment">// 复制 struct slice &#123; pointer, len, cap &#125;。</span></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">		s = s[:<span class="number">3</span>]  <span class="comment">// 对 slice 的修改，不会影响 range。</span></span><br><span class="line">		s[<span class="number">2</span>] = <span class="number">100</span> <span class="comment">// 对底层数据的修改。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">println</span>(i, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>0 1<br>1 2<br>2 100<br>3 4<br>4 5</p>
</blockquote>
</li>
</ul>
<h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><ul>
<li><p>分支表达式可以是任意类型，不限于常量。可省略 break，默认自动终止。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">i := <span class="number">2</span></span><br><span class="line"><span class="keyword">switch</span> i &#123;</span><br><span class="line"><span class="keyword">case</span> x[<span class="number">1</span>]:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>, <span class="number">3</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;c&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>a</p>
</blockquote>
</li>
<li><p>如需要继续下一分支，可使用 fallthrough，但不再判断条件。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x := <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">	<span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;b&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>a</p>
<p>b</p>
</blockquote>
</li>
<li><p>省略条件表达式，可当 if…else if…else 使用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> x[<span class="number">1</span>] &gt; <span class="number">0</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> x[<span class="number">1</span>] &lt; <span class="number">0</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;c&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">switch</span> i := x[<span class="number">2</span>]; &#123; <span class="comment">// 带初始化语句</span></span><br><span class="line"><span class="keyword">case</span> i &gt; <span class="number">0</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> i &lt; <span class="number">0</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;c&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Goto-Break-Continue"><a href="#Goto-Break-Continue" class="headerlink" title="Goto, Break, Continue"></a>Goto, Break, Continue</h3><ul>
<li><p>支持在函数内 goto 跳转。标签名区分大小写，未使用标签引发错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="built_in">println</span>(i)</span><br><span class="line">		i++</span><br><span class="line">		<span class="keyword">if</span> i &gt; <span class="number">2</span> &#123;</span><br><span class="line">			<span class="keyword">goto</span> BREAK</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">BREAK:</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">&quot;break&quot;</span>)</span><br><span class="line">EXIT: <span class="comment">// Error: label EXIT defined and not used</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>break用来结束最里面的for/select/switch的语句，如果这里有标签，那么它必须在for/select/switch的正上面。</p>
</li>
<li><p>配合标签，break 和 continue 可在多级嵌套循环中跳出。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">L1:</span><br><span class="line">	<span class="keyword">for</span> x := <span class="number">0</span>; x &lt; <span class="number">3</span>; x++ &#123;</span><br><span class="line">	L2:</span><br><span class="line">		<span class="keyword">for</span> y := <span class="number">0</span>; y &lt; <span class="number">5</span>; y++ &#123;</span><br><span class="line">			<span class="keyword">if</span> y &gt; <span class="number">2</span> &#123;</span><br><span class="line">				<span class="keyword">continue</span> L2</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> x &gt; <span class="number">1</span> &#123;</span><br><span class="line">				<span class="keyword">break</span> L1</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">print</span>(x, <span class="string">&quot;:&quot;</span>, y, <span class="string">&quot; &quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">println</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>0:0 0:1 0:2<br>1:0 1:1 1:2 </p>
</blockquote>
</li>
<li><p>break 可用于 for、switch、select，而 continue 仅能用于 for 循环。</p>
</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>表达式</p><p><a href="https://mrcq.github.io/2022/10/28/Go/表达式/">https://mrcq.github.io/2022/10/28/Go/表达式/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Kurisu</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-10-28</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-11-04</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/Go/">Go </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/10/28/Go/String%E5%BA%93%E5%87%BD%E6%95%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">String库函数</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/10/28/hexo/hexo%E8%B8%A9%E5%9D%913/"><span class="level-item">hexo踩坑——字体和计数</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Kurisu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Kurisu</p><p class="is-size-6 is-block">水滴石穿，聚沙成塔</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">63</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">27</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/mrcq" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/mrcq"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#保留字"><span class="level-left"><span class="level-item">1</span><span class="level-item">保留字</span></span></a></li><li><a class="level is-mobile" href="#运算符"><span class="level-left"><span class="level-item">2</span><span class="level-item">运算符</span></span></a></li><li><a class="level is-mobile" href="#初始化"><span class="level-left"><span class="level-item">3</span><span class="level-item">初始化</span></span></a></li><li><a class="level is-mobile" href="#控制流"><span class="level-left"><span class="level-item">4</span><span class="level-item">控制流</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#IF"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">IF</span></span></a></li><li><a class="level is-mobile" href="#For"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">For</span></span></a></li><li><a class="level is-mobile" href="#Range"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">Range</span></span></a></li><li><a class="level is-mobile" href="#Switch"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">Switch</span></span></a></li><li><a class="level is-mobile" href="#Goto-Break-Continue"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">Goto, Break, Continue</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Kurisu&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Kurisu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>